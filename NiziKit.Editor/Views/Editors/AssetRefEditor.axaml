<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="NiziKit.Editor.Views.Editors.AssetRefEditor">

    <StackPanel Spacing="6">
        <!-- Pack Selection -->
        <Grid ColumnDefinitions="80,*">
            <TextBlock Grid.Column="0"
                       Text="Pack"
                       Classes="label"
                       VerticalAlignment="Center"/>
            <Border Grid.Column="1"
                    x:Name="PackSelectorHost"
                    Background="{DynamicResource SurfaceDarkBrush}"
                    CornerRadius="{DynamicResource EditorControlCornerRadius}"
                    Padding="8,6"
                    Cursor="Hand">
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Grid.Column="0"
                               x:Name="PackDisplayText"
                               Text="(None)"
                               FontSize="{DynamicResource EditorFontSizeSmall}"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               VerticalAlignment="Center"
                               TextTrimming="CharacterEllipsis"/>
                    <PathIcon Grid.Column="1"
                              Data="M7,10L12,15L17,10H7Z"
                              Width="10" Height="10"
                              Foreground="{DynamicResource TextMutedBrush}"
                              Margin="6,0,0,0"/>
                </Grid>
            </Border>
        </Grid>

        <!-- Asset Selection -->
        <Grid ColumnDefinitions="80,*">
            <TextBlock Grid.Column="0"
                       Text="Asset"
                       Classes="label"
                       VerticalAlignment="Center"/>
            <Border Grid.Column="1"
                    x:Name="AssetSelectorHost"
                    Background="{DynamicResource SurfaceDarkBrush}"
                    CornerRadius="{DynamicResource EditorControlCornerRadius}"
                    Padding="8,6"
                    Cursor="Hand">
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Grid.Column="0"
                               x:Name="AssetDisplayText"
                               Text="(None)"
                               FontSize="{DynamicResource EditorFontSizeSmall}"
                               Foreground="{DynamicResource TextPrimaryBrush}"
                               VerticalAlignment="Center"
                               TextTrimming="CharacterEllipsis"/>
                    <PathIcon Grid.Column="1"
                              Data="M7,10L12,15L17,10H7Z"
                              Width="10" Height="10"
                              Foreground="{DynamicResource TextMutedBrush}"
                              Margin="6,0,0,0"/>
                </Grid>
            </Border>
        </Grid>

        <!-- Popup for selection (shared between pack and asset) -->
        <Popup x:Name="SelectorPopup"
               IsLightDismissEnabled="True"
               PlacementMode="Bottom"
               WindowManagerAddShadowHint="True">
            <Border Background="{DynamicResource SurfaceBrush}"
                    BorderBrush="{DynamicResource PanelBorderBrush}"
                    BorderThickness="1"
                    CornerRadius="{DynamicResource EditorControlCornerRadius}"
                    Padding="8"
                    MinWidth="200"
                    MaxWidth="300"
                    MaxHeight="320">
                <StackPanel Spacing="8">
                    <TextBox x:Name="SearchBox"
                             Watermark="Search..."
                             FontSize="{DynamicResource EditorFontSizeSmall}"/>
                    <ScrollViewer MaxHeight="250"
                                  HorizontalScrollBarVisibility="Disabled"
                                  VerticalScrollBarVisibility="Auto">
                        <ItemsControl x:Name="ItemsControl"/>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Popup>
    </StackPanel>
</UserControl>
