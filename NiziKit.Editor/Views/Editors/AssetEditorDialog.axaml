<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:NiziKit.Editor.ViewModels"
             xmlns:ui="using:FluentAvalonia.UI.Controls"
             xmlns:editors="using:NiziKit.Editor.Views.Editors"
             x:Class="NiziKit.Editor.Views.Editors.AssetEditorDialog"
             x:DataType="vm:ContentBrowserViewModel">

    <Border Classes="dialog-container-large"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Margin="40">
        <Grid RowDefinitions="Auto,Auto,*,Auto">
            <Border Grid.Row="0"
                    Background="{StaticResource EditorAccentGradient}"
                    Padding="24,14">
                <Grid ColumnDefinitions="*,Auto">
                    <TextBlock Text="{Binding AssetEditorTitle}"
                               Classes="subtitle"
                               Foreground="#FFFFFF"
                               VerticalAlignment="Center"
                               TextTrimming="CharacterEllipsis"/>
                    <Button Grid.Column="1"
                            Command="{Binding CloseAssetEditorCommand}"
                            ToolTip.Tip="Close"
                            Padding="8"
                            Classes="ghost">
                        <ui:SymbolIcon Symbol="Dismiss" FontSize="{StaticResource IconSizeMedium}" Foreground="#FFFFFF"/>
                    </Button>
                </Grid>
            </Border>

            <Border Grid.Row="1" Height="1" Background="{StaticResource EditorPanelBorder}"/>

            <TabControl Grid.Row="2" Margin="16" x:Name="EditorTabs">
                <TabItem Header="Form">
                    <editors:JsonFormEditor x:Name="FormEditor" Margin="8"/>
                </TabItem>

                <TabItem Header="JSON">
                    <ScrollViewer HorizontalScrollBarVisibility="Auto"
                                  VerticalScrollBarVisibility="Auto"
                                  Margin="8">
                        <TextBox x:Name="JsonTextBox"
                                 Text="{Binding EditingJson}"
                                 AcceptsReturn="True"
                                 AcceptsTab="True"
                                 TextWrapping="NoWrap"
                                 FontFamily="Consolas, Courier New, monospace"
                                 MinHeight="400"/>
                    </ScrollViewer>
                </TabItem>
            </TabControl>

            <Border Grid.Row="3"
                    Background="{StaticResource EditorPanelSecondaryBackground}"
                    Padding="18,14">
                <Grid ColumnDefinitions="*,Auto,Auto">
                    <TextBlock Grid.Column="0"
                               Text="{Binding StatusMessage}"
                               Foreground="{StaticResource EditorTextMuted}"
                               VerticalAlignment="Center"/>
                    <Button Grid.Column="1"
                            Content="Cancel"
                            Command="{Binding CloseAssetEditorCommand}"
                            Padding="22,12"
                            Margin="0,0,10,0"/>
                    <Button Grid.Column="2"
                            Content="Save"
                            Click="OnSaveClick"
                            Padding="22,12"
                            Classes="accent"/>
                </Grid>
            </Border>
        </Grid>
    </Border>

</UserControl>
